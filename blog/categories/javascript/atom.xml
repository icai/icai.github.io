<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: javascript | æ³›å‰ç«¯å¼€å‘]]></title>
  <link href="http://blog.w3cub.com/blog/categories/javascript/atom.xml" rel="self"/>
  <link href="http://blog.w3cub.com/"/>
  <updated>2020-05-27T17:13:10+00:00</updated>
  <id>http://blog.w3cub.com/</id>
  <author>
    <name><![CDATA[Terry Cai]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[æµ…è°ˆæœåŠ¡ç«¯æ¸²æŸ“(SSR)çš„å‡ ç§å½¢å¼]]></title>
    <link href="http://blog.w3cub.com/blog/2019/07/01/ssr-types/"/>
    <updated>2019-07-01T08:48:43+00:00</updated>
    <id>http://blog.w3cub.com/blog/2019/07/01/ssr-types</id>
    <content type="html"><![CDATA[<p>åœ¨å¥½ä¹…å¥½ä¹…ä¹‹å‰ï¼Œå‰ç«¯çš„æ¦‚å¿µæ˜¯æ¨¡ç³Šçš„ã€‚å‰ç«¯å°±æ˜¯é¡µé¢ä»”ï¼Œåˆ‡å›¾ä»”ã€‚å‰ç«¯çš„ä»»åŠ¡å°±æ˜¯æŠŠhtmlè·Ÿjså†™å¥½ï¼Œç„¶åä¸¢ç»™åç«¯å¥—æ•°æ®ã€‚åŸºæœ¬ä¼ ç»Ÿçš„MVCï¼Œsmarty Viewã€‚</p>
<pre><code>assign-&gt;('data', $data)
</code></pre>
<p>è¿™äº›ä¹Ÿç»™åç«¯åšäº†ã€‚æˆ–è€…å‰ç«¯å°±ä¸¢ç»™UIï¼ˆç¾å·¥ï¼‰åšï¼Œå‰ç«¯æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>

<!--more -->

<p>[[back] -&gt;[view]]-&gt; [front end]</p>

<p>ä½†æ˜¯éšç€ç§»åŠ¨ç«¯çš„å…´èµ·ï¼Œå¼€å§‹æµè¡Œå‰ååˆ†ç¦»ã€‚</p>

<p>åç«¯æ¸²æŸ“æ¨¡ç‰ˆçš„è¿™ä¸€å±‚å°±ç»™çœç•¥æ‰äº†.<br />
å˜æˆå‰ååˆ†ç¦»ã€‚å…¶å®æ‰€è°“çš„åç«¯æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯æ¸²æŸ“é¦–å±å¹•ã€‚<br />
[back] -&gt;-&gt; [front and view]</p>

<p>ä½†æ˜¯åˆå› ä¸ºå‰ååˆ†ç¦»å¯¹æœç´¢å¼•æ“çˆ¬è™«ä¸å¤ªå‹å¥½ã€‚æƒ³å½“å¹´ï¼Œåšç½‘ç«™çš„äººéƒ½ååˆ†åœ¨æ„ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯Alexaæ’åï¼Œåè€…å›½å†…çš„ç™¾åº¦æ’åï¼Œcnzzæ’åç­‰ç­‰ã€‚æ¯•ç«Ÿé‚£ä¸ªæ—¶å€™é£å¤´çš„äººéƒ½ä¼šçœ‹ä¸€ä¸‹ä½ çš„ç½‘ç«™alexaæ˜¯å¤šå°‘ã€‚å…¶å®è¿™ç§æŒ‡æ ‡å°±æ˜¯ååº”äº†ä¸€ä¸ªç½‘ç«™çš„æ´»è·ƒåº¦ã€‚ä¸å¦‚è¯´ï¼Œä½ è¯´ä½ çš„ç½‘ç«™æœ‰å‡ ç™¾ä¸‡ç”¨æˆ·ï¼Œä½†æ˜¯åˆ«äººæŸ¥äº†ä¸€ä¸‹è¿™ç§æ’åï¼Œå°½ç„¶å‡ åƒä¸‡ï¼Œæœç´¢å¼•æ“æ”¶å½•å‡ ä¹æ²¡æœ‰ã€‚è¿™æ ·åšä½ è®¤ä¸ºä¼šæœ‰ä¿¡æœåŠ›å—ï¼Ÿ</p>

<p>å½“ç„¶SEOéœ€æ±‚å¤§éƒ¨åˆ†é¢å‘Cç«¯çš„ã€‚<strong>é¢å‘åå°ç®¡ç†ç³»ç»Ÿ</strong>çš„å½“ç„¶å°±æ²¡æœ‰é‚£ä¹ˆåœ¨ä¹äº†ã€‚</p>

<p>ä¸ºäº†è§£å†³SPA  bad SEO é—®é¢˜ã€‚ä¾‹å¦‚åå°æœåŠ¡å™¨æ‹¦æˆªæ‹¦æˆªç‰¹å®šçˆ¬è™«è¿›è¡ŒSEO hackï¼Œæ‰¹é‡æäº¤Sitemap ç­‰ç­‰çš„æ‰‹æ®µã€‚ç®€å•çš„è¯´ï¼Œä½ æƒ³å‘Šè¯‰æœç´¢å¼•æ“é“¾æ¥ï¼Œç„¶åçˆ¬è™«è·³è¿›æ¥ï¼Œè¿›è¡Œç›¸åº”çš„SEO hack æŠ•é£Ÿæ—¶æ¸²æŸ“ã€‚</p>

<p><strong>æˆ‘ä»¬æŠŠè¿™ç§å½¢å¼å«åš å‰ååˆ†ç¦» + åç«¯è¾…åŠ©ï¼ˆSPA hackå›æ»šï¼‰ã€‚</strong></p>

<p>ä½†æ˜¯éšç€nodeï¼Œbabelçš„å¿«é€Ÿå‘å±•ï¼Œæµè§ˆå™¨å¿«é€Ÿè¿­ä»£ï¼Œå‰ç«¯å·¥ä½œå¤©å¤©è°ƒè¯•å…¼å®¹çš„æ—¶ä»£è¿‡å»äº†ã€‚å˜æˆäº†åç«¯æœåŠ¡å™¨ + å‰ç«¯æœåŠ¡å™¨è¿™ç§æ¶æ„ã€‚[back server] -&gt;-&gt; [[view-server]front server]ã€‚<br />
å‰ç«¯çš„åœ°ä½é‡è¦å¤šäº†ã€‚åŒæ„è¿™ä¸ªæ¦‚å¿µäºæ˜¯è¢«æå‡ºäº†ã€‚å½“æ—¶å‰ç«¯ä»¬å°±è®¾æƒ³ <strong>åç«¯æ¸²æŸ“è·Ÿå‰ç«¯å¼‚æ­¥æ¸²æŸ“å¯ä»¥é‡ç”¨</strong>ã€‚æ¯”å¦‚ä¸€ä¸ªå¾ªç¯çš„åˆ—è¡¨ï¼Œé‡Œé¢çš„item æ¨¡ç‰ˆå¯ä»¥è¢«å‰ç«¯é‡ç”¨ã€‚åˆ°åæ¥ï¼Œéšç€ react vue ç­‰æ¡†æ¶å¼€å§‹æµè¡Œï¼Œnextjsè¯ç”Ÿäº†ã€‚è¿™ä¸ªé˜¶æ®µï¼Œä¸»è¦æ˜¯SPAçš„æ”¹è¿›ã€‚nodeæœåŠ¡å™¨æŠŠSEOéœ€è¦çš„åŠŸèƒ½éƒ½åšäº†ã€‚<br />
æ—¢ç„¶nodeå¯ä»¥å†™serverå±‚ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸å¯ä»¥åç«¯ä¹Ÿç”¨nodeå‘¢ã€‚å½“ç„¶è¿™ç”¨ä»€ä¹ˆè¯­è¨€å†™åç«¯ï¼Œå¹¶ä¸å½±å“å‰ç«¯ã€‚</p>

<p><strong>æˆ‘ä»¬æŠŠè¿™ä¸ªå½¢å¼ç§°åšï¼ŒSPA + SSRå‰ç«¯æ¸²æŸ“ã€‚</strong></p>

<p>æ—¢ç„¶å¯ä»¥SSRå‰ç«¯æ¸²æŸ“ï¼Œä¸ºä»€ä¹ˆä¸å¯ä»¥åç«¯æ¸²æŸ“å‘¢ï¼å½“ç„¶æœåŠ¡å™¨çš„æƒåˆ©å°±åªå‰©ä¸‹äº† nodeã€‚<br />
åˆå¼€å§‹ åç«¯çš„ Route -&gt; Controller -&gt; Model-&gt; View.<br />
è¿™æ—¶å€™çš„ View å°±å˜æˆäº†react æˆ–è€… vue. å…¶å®å°±æŠŠå½“å¹´çš„åç«¯æ¨¡ç‰ˆæ›¿æ¢æˆäº† å‰ç«¯æ¡†æ¶æ¨¡ç‰ˆï¼Œmodelè¾“å‡ºçš„æ•°æ®å°±å˜æˆ Viewçš„propæˆ–è€…data å˜é‡ã€‚</p>

<p><strong>æˆ‘ä»¬æŠŠè¿™ç§å½¢å¼ç§°ä¸º  SSRåç«¯æ¸²æŸ“ã€‚</strong></p>

<p>åˆ°å¤´æ¥ï¼Œä½ ä¼šå‘ç°ï¼Œèµ°äº†ä¸€åœˆï¼Œåˆå›åˆ°äº†åŸç‚¹ã€‚</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[javascriptæ··æ·†ä¸è§£æ··æ·†çš„é‚£äº›äº‹å„¿]]></title>
    <link href="http://blog.w3cub.com/blog/2019/04/01/js-confusion/"/>
    <updated>2019-04-01T05:48:43+00:00</updated>
    <id>http://blog.w3cub.com/blog/2019/04/01/js-confusion</id>
    <content type="html"><![CDATA[<p>åƒè½¯ä»¶åŠ å¯†ä¸è§£å¯†ä¸€æ ·ï¼Œjavascriptçš„æ··æ·†ä¸è§£æ··æ·†åŒå±äºåŒä¸€ä¸ªèŒƒç•´ã€‚é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆã€‚æ²¡æœ‰æ°¸æ’çš„é»‘ï¼Œä¹Ÿæ²¡æœ‰æ°¸æ’çš„ç™½ã€‚ä¸€åˆ‡éƒ½æ˜¯èµ„æœ¬å¸‚åœºé©±åŠ¨è¡Œä¸ºï¼Œç°åœ¨éƒ½æµè¡Œä½ èƒ½ä¸ºäººè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œè¿™ä¸ªæ¦‚å¿µã€‚é‚£ä¹ˆå¸‚åœºç©¶ç«Ÿèƒ½å®¹çº³å¤šå°‘ä¸ªèƒ½è§£å†³è¿™ç§é—®é¢˜çš„åˆ©ç›Šè€…ã€‚JSæ²¡æœ‰ç§˜å¯†ã€‚</p>

<p>å…¶å®æœ¬äººä¸èµæˆjavascriptè¿›è¡Œhashæ··æ·†å¤„ç†ï¼Œä¸€æ‹–æ…¢è¿è¡Œæ—¶é€Ÿåº¦ï¼ŒäºŒä½“ç§¯å¤§ã€‚JSä»£ç å‰ç«¯å¯è·å–ï¼Œå¤©ç”Ÿèµ‹äºˆâ€œå¼€æºâ€å±æ€§ï¼Œéƒ½å¯ä»¥åœ¨chrome devToolsä¸‹æŸ¥çœ‹ã€‚JSéå‹ç¼©æ€§æ··æ·†å®Œå…¨è¿æ³•å‰ç«¯ä¼˜åŒ–å‡†åˆ™ã€‚</p>

<!-- more -->

<p>ç›®å‰ç½‘ç»œä¸Šå¯ä»¥æœç´¢çš„JSæ··æ·†å·¥å…·ä¸å¤–ä¹ä»¥ä¸‹å‡ ç§ï¼š</p>

<p><a href="http://blog.w3cub.com/tools/jspacker/">evalæ··æ·†</a>ï¼Œä¹Ÿæ˜¯æœ€æ—©JSå‡ºç°çš„æ··æ·†åŠ å¯†ï¼Œæ®è¯´ç¬¬ä¸€å¤©å°±è¢«ç ´è§£ï¼Œä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œalertä¸€ä¸‹å°±å¯ä»¥ç ´è§£äº†ã€‚è¿™ç§æ–¹æ³•ä»å‡ºç”Ÿçš„é‚£å¤©å°±å¤±å»äº†æ„ä¹‰ã€‚å…¶å®JSåŠ å¯†ï¼ˆæ··æ·†ï¼‰æ˜¯ç›¸å¯¹äºå¯è¯»æ€§è€Œè¨€çš„ï¼Œå…¶å®çœŸæ­£æœ‰æ„ä¹‰çš„å°±æ˜¯å‹ç¼©å‹æ··æ·†uglifyè¿™ä¸€ç±»ï¼Œå³å¯å‡å°‘ä½“é‡ï¼Œä¹Ÿå¯å‡å°‘å¯è¯»æ€§ã€‚</p>

<p>ä½†æ˜¯ï¼Œä¹Ÿä¸èƒ½æ’é™¤éƒ¨åˆ†å•†ä¸šæºä»£ç ä½¿ç”¨hashç±»å‹æ··æ·†æºä»£ç ï¼Œæ¯”å¦‚ miniui ä½¿ç”¨çš„<a href="https://sourceforge.net/projects/jsintegration/files/tools/_%20JSA-20071021/">JSAåŠ å¯†</a>, fundebugä½¿ç”¨çš„<a href="https://obfuscator.io/">javascript-obfuscator</a>ã€‚</p>

<p>ä¸‹é¢é€šè¿‡ä»£ç æ¥è¯´æ˜ JSAåŠ å¯† å’Œ javascript-obfuscator çš„åŒºåˆ«ï¼š</p>

<p>è¦æ··æ·†çš„ä»£ç ï¼š</p>

<pre><code class="language-js">function logG(message) {
  console.log('\x1b[32m%s\x1b[0m', message); 
}
function logR(message) {
  console.log('\x1b[41m%s\x1b[0m', message); 
}
logG('logR');
logR('logG');

</code></pre>

<p>é€šè¿‡<a href="https://sourceforge.net/projects/jsintegration/files/tools/_%20JSA-20071021/">JSAåŠ å¯†</a>æ··æ·†åç”Ÿæˆçš„ä»£ç </p>

<pre><code>function o00($){console.log("\x1b[32m%s\x1b[0m",$)}function o01($){console.log("\x1b[41m%s\x1b[0m",$)}o00("logR");o01("logG")

</code></pre>
<p>ç„¶åå†<a href="https://beautifier.io/">beautifier</a>ä¸€ä¸‹ï¼š</p>

<pre><code class="language-js">function o00($) {
  console.log("\x1b[32m%s\x1b[0m", $)
}

function o01($) {
  console.log("\x1b[41m%s\x1b[0m", $)
}
o00("logR");
o01("logG")

</code></pre>

<p>å¯ä»¥å‘ç°ï¼Œå…¶å®æ²¡æœ‰åšä»€ä¹ˆä»€ä¹ˆä¿®æ”¹ï¼Œåªæ˜¯åšäº†ä¸€äº›å˜é‡æ›¿æ¢ã€‚æƒ³è¿˜åŸä¹Ÿæ¯”è¾ƒç®€å•çš„ã€‚è¿™é‡Œå°±ä¸æ‹¿å®ƒæ¥åšä»£è¡¨ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆäººç”¨ã€‚</p>

<p>é€šè¿‡<a href="https://obfuscator.io/">javascript-obfuscator</a>æ··æ·†åç”Ÿæˆçš„ä»£ç </p>

<pre><code class="language-js">var _0xd6ac=['[41m%s[0m','logG','log'];(function(_0x203a66,_0x6dd4f4){var _0x3c5c81=function(_0x4f427c){while(--_0x4f427c){_0x203a66['push'](_0x203a66['shift']());}};_0x3c5c81(++_0x6dd4f4);}(_0xd6ac,0x6e));var _0x5b26=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=_0xd6ac[_0x2d8f05];return _0x4d74cb;};function logG(_0x4f1daa){console[_0x5b26('0x0')]('[32m%s[0m',_0x4f1daa);}function logR(_0x38b325){console[_0x5b26('0x0')](_0x5b26('0x1'),_0x38b325);}logG('logR');logR(_0x5b26('0x2'));

</code></pre>

<p>å†<a href="https://beautifier.io/">beautifier</a>ä¸€ä¸‹ï¼š</p>

<pre><code class="language-js">var _0xd6ac = ['[41m%s[0m', 'logG', 'log'];
(function(_0x203a66, _0x6dd4f4) {
  var _0x3c5c81 = function(_0x4f427c) {
    while (--_0x4f427c) {
      _0x203a66['push'](_0x203a66['shift']());
    }
  };
  _0x3c5c81(++_0x6dd4f4);
}(_0xd6ac, 0x6e));
var _0x5b26 = function(_0x2d8f05, _0x4b81bb) {
  _0x2d8f05 = _0x2d8f05 - 0x0;
  var _0x4d74cb = _0xd6ac[_0x2d8f05];
  return _0x4d74cb;
};

function logG(_0x4f1daa) {
  console[_0x5b26('0x0')]('[32m%s[0m', _0x4f1daa);
}

function logR(_0x38b325) {
  console[_0x5b26('0x0')](_0x5b26('0x1'), _0x38b325);
}
logG('logR');
logR(_0x5b26('0x2'));
</code></pre>

<p>è¿™ä¸ªå¤æ‚å¾—å¤šï¼Œä½†æ˜¯åˆ†æä¸€ä¸‹ä½ ä¼šå‘ç°ï¼Œå…¶å®å¤šäº†ä¸€ä¸ªå­—å…¸ï¼Œæ‰€æœ‰æ–¹æ³•å˜é‡ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨å­—å…¸ä¸­ï¼Œè°ƒç”¨æ—¶å…ˆè°ƒç”¨å­—å…¸è¿˜åŸæ–¹æ³•åå˜é‡å†æ‰§è¡Œã€‚<br />
å…¶å®å…¥å£éƒ½æ˜¯å˜é‡çš„è§„åˆ™ã€‚</p>

<p>å­—å…¸å‡½æ•°ï¼š</p>

<pre><code class="language-js">var _0xd6ac = ['[41m%s[0m', 'logG', 'log'];
(function(_0x203a66, _0x6dd4f4) {
  var _0x3c5c81 = function(_0x4f427c) {
    while (--_0x4f427c) {
      _0x203a66['push'](_0x203a66['shift']());
    }
  };
  _0x3c5c81(++_0x6dd4f4);
}(_0xd6ac, 0x6e));
var _0x5b26 = function(_0x2d8f05, _0x4b81bb) {
  _0x2d8f05 = _0x2d8f05 - 0x0;
  var _0x4d74cb = _0xd6ac[_0x2d8f05];
  return _0x4d74cb;
};

</code></pre>

<p>é€šè¿‡ä»¥ä¸Šå‘ç°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠJSæ··æ·†å½’ç»“ä¸ºä¸‰ç±»ï¼Œåˆ†åˆ«æ˜¯ evalç±»å‹ï¼Œhashç±»å‹ï¼Œå‹ç¼©ç±»å‹ã€‚è€Œå‹ç¼©ç±»å‹ï¼Œæ˜¯ç›®å‰å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„å¸¸ç”¨å·¥å…·ï¼Œä»¥<a href="https://www.npmjs.com/package/uglify-js">uglify</a>ä¸ºä»£è¡¨ã€‚</p>

<p>å¸¸ç”¨çš„å‰ç«¯å‹ç¼©ä¼˜åŒ–å·¥å…·ï¼š</p>

<p>JavaScript:</p>
<ul>
  <li><a href="https://github.com/babel/minify">babel-minify</a></li>
  <li><a href="https://github.com/terser-js/terser">terser</a></li>
  <li><a href="https://github.com/mishoo/UglifyJS2">uglify-js</a></li>
  <li><a href="https://github.com/mishoo/UglifyJS2/tree/harmony">uglify-es</a></li>
  <li><a href="https://www.npmjs.com/package/google-closure-compiler">Google Closure Compiler</a></li>
  <li><a href="http://yui.github.io/yuicompressor/">YUI Compressor</a></li>
</ul>

<p>CSS:</p>
<ul>
  <li><a href="https://github.com/postcss/postcss">PostCSS</a></li>
  <li><a href="https://github.com/jakubpawlowicz/clean-css">clean-css</a></li>
  <li><a href="https://github.com/css/csso">CSSO</a></li>
  <li><a href="http://yui.github.io/yuicompressor/">YUI Compressor</a></li>
</ul>

<p>HTML:</p>
<ul>
  <li><a href="https://www.npmjs.com/package/html-minifier">html-minifier</a></li>
</ul>

<p>ä»å·¥å…·æµ(workflow) æ¥çœ‹ï¼Œä¸è®ºæ˜¯ webpack è¿˜æ˜¯ gulp ï¼Œç›®å‰javascriptæœ€æµè¡Œå·¥å…·è¿˜æ˜¯uglifyã€‚</p>

<p>ç›¸åº”çš„è§£æ··æ·†å·¥å…·ï¼š</p>

<ul>
  <li>
    <p>evalå¯¹åº”çš„è§£æ··æ·†å·¥å…·, éšä¾¿ç™¾åº¦éƒ½å¯ä»¥æœç´¢åˆ°ï¼Œå¦‚<a href="http://blog.w3cub.com/tools/jspacker/">jspacker</a></p>
  </li>
  <li>
    <p>JSAå¯¹åº”çš„è§£æ··æ·†å·¥å…·<a href="https://github.com/jscck/unjsa">unjsa</a></p>
  </li>
  <li>
    <p><a href="https://obfuscator.io/">javascript-obfuscator</a>å¯¹åº”çš„è§£æ··æ·†å·¥å…·<a href="https://github.com/jscck/crack.js">crack.js</a></p>
  </li>
  <li>
    <p>å‹ç¼©ç±»å‹uglifyå¯¹åº”çš„å·¥å…·<a href="https://github.com/eth-sri/UnuglifyJS">UnuglifyJS</a>ï¼Œåœ¨çº¿ç‰ˆ<a href="http://www.jsnice.org/">jsnice</a></p>
  </li>
</ul>

<p>è§£æ··æ·†ç­–ç•¥å…¶å®æ˜¯ä¾æ®ç”Ÿæˆä»£ç è§„å¾‹ç¼–å†™ï¼Œä¸å¤–ä¹è§‚å¯Ÿç‰¹å¾åˆ†æï¼Œå†è§‚å¯Ÿç‰¹å¾åˆ†æï¼Œä¸æ–­è°ƒæ•´ã€‚éƒ½æ˜¯æ‰‹åŠçœ¼è§åŠŸå¤«ã€‚</p>

<p>éƒ½æ²¡æœ‰ä»€ä¹ˆéš¾åº¦å¯è¨€ï¼Œæœ‰çš„å°±æ˜¯è€æ€§ã€‚æ¯”å¦‚<a href="https://obfuscator.io/">javascript-obfuscator</a>å¯¹åº”çš„è§£æ··æ·†å·¥å…·å¯ä»¥<br />
åˆ†è§£ä¸ºNå› å­é—®é¢˜ï¼š</p>

<p>å¦‚ä½•æŸ¥è¯¢functionçš„ä½œç”¨åŸŸï¼Ÿ<br />
é¢„æ‰§è¡Œå˜é‡æ›¿æ¢å¯èƒ½å­˜åœ¨ç±»å‹ï¼Ÿ<br />
â€¦</p>

<p>å¦‚ï¼š</p>

<pre><code class="language-js">var _0xd6ac = ['[41m%s[0m', 'logG', 'log'];
(function(_0x203a66, _0x6dd4f4) {
  var _0x3c5c81 = function(_0x4f427c) {
    while (--_0x4f427c) {
      _0x203a66['push'](_0x203a66['shift']());
    }
  };
  _0x3c5c81(++_0x6dd4f4);
}(_0xd6ac, 0x6e));
var _0x5b26 = function(_0x2d8f05, _0x4b81bb) {
  _0x2d8f05 = _0x2d8f05 - 0x0;
  var _0x4d74cb = _0xd6ac[_0x2d8f05];
  return _0x4d74cb;
};

function logG(_0x4f1daa) {
  console[_0x5b26('0x0')]('[32m%s[0m', _0x4f1daa);
}

function logR(_0x38b325) {
  console[_0x5b26('0x0')](_0x5b26('0x1'), _0x38b325);
}
logG('logR');
logR(_0x5b26('0x2'));
</code></pre>

<p>è¦è¿˜åŸæˆ</p>

<pre><code class="language-js">function logG(message) {
  console.log('\x1b[32m%s\x1b[0m', message); 
}
function logR(message) {
  console.log('\x1b[41m%s\x1b[0m', message); 
}
logG('logR');
logR('logG');

</code></pre>
<p>ç¬¬ä¸€æ­¥ä½ æ€»å¾—çŸ¥é“å­—å…¸å‡½æ•°ï¼Œç„¶åæ‰§è¡Œå­—å…¸å‡½æ•° <code>_0x5b26('0x0')</code> è¿˜åŸæˆ <code>log</code>.</p>

<p>é‚£ä¹ˆå°±å¥½åŠäº†ï¼Œå†™ä»£ç çš„äº‹ã€‚<br />
å¦‚ https://github.com/jscck/crack.js/blob/master/crack.js</p>

<p>è¿˜åŸåï¼Œå¦‚ä½•é‡æ„ä»£ç ï¼Œé‚£ä¹ˆä½ è¿˜å¾—çŸ¥é“ä»£ç ç”Ÿæˆä¹‹å‰æ˜¯é€šè¿‡ä»€ä¹ˆå·¥å…·æ‰“åŒ…çš„webpack? è¿˜æ˜¯ï¼Ÿ</p>

<p>å¦‚webpack çš„å„ç§å°è£…å¤´å’Œå°¾<br />
https://webpack.js.org/configuration/output/#expose-a-variable</p>

<pre><code class="language-js">(function webpackUniversalModuleDefinition(root, factory) {
  if(typeof exports === 'object' &amp;&amp; typeof module === 'object')
    module.exports = factory();
  else if(typeof define === 'function' &amp;&amp; define.amd)
    define([], factory);
  else if(typeof exports === 'object')
    exports['MyLibrary'] = factory();
  else
    root['MyLibrary'] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
  return _entry_return_;
});
</code></pre>

<p>å‡å¦‚å†æ·±å…¥ä¸€ç‚¹ï¼Œå¯èƒ½ä¼šæ¶‰åŠåˆ°JSè¯­æ³•è§£é‡Šå™¨, ASTæŠ½è±¡è¯­æ³•æ ‘</p>

<p>ç›®å‰æ¶‰åŠåˆ° JSè¯­æ³•è§£é‡Šå™¨, ASTæŠ½è±¡è¯­æ³•æ ‘çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>

<p><a href="https://prepack.io/">prepack</a>, <a href="http://esprima.org/">esprima</a>, <a href="https://babeljs.io/">babel</a></p>

<p>æˆ–è€…å¯ä»¥é˜…è¯»ã€Šç¼–ç¨‹è¯­è¨€å®ç°æ¨¡å¼ã€‹ï¼Œæ¶‰åŠåˆ° <a href="https://github.com/antlr/antlr4">antlr4</a>ã€‚</p>

<p>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡esprimaç­‰å·¥å…·æ¥åšè§£æ··æ·†ï¼Œåªæ˜¯å·¥ä½œé‡å¤§ä¸€ç‚¹ï¼Œå€¼ä¸å€¼çš„é—®é¢˜ã€‚</p>

<p>å¯¹äºæœªæ¥ï¼ŒJSå•†ä¸šæºç åŠ å¯†çš„æ–¹å‘å¯èƒ½<a href="https://webassembly.org/">webassembly</a>ï¼Œå…ˆåœ¨æœåŠ¡ç«¯ç¼–è¯‘æˆwasmï¼Œæºç å°±èƒ½çœŸæ­£çš„é—­æºã€‚</p>

<p>æœ‰äººçš„åœ°æ–¹å°±æœ‰è·¯ï¼Œæœ‰æ··æ·†çš„åœ°æ–¹å°±æœ‰è§£æ··æ·†ï¼Œç›®å‰æœºå™¨å­¦ä¹ ç¼–ç¨‹å“åº”çš„è§£æ··æ·†å·¥å…·ä¹Ÿåšçš„ç›¸å½“å‡ºè‰²ï¼Œæ¯”å¦‚</p>

<p><a href="16"><img src="https://www.sri.inf.ethz.ch/assets/images/sri-logo.svg" alt="Secure, Reliable, and Intelligent Systems Lab" width="136" /></a></p>

<p>Machine Learning for Programming äº§å“<br />
<a href="17">nice2predict</a>ï¼Œ<a href="9">jsnice</a> â€¦<br />
æŸ¥çœ‹ https://www.sri.inf.ethz.ch/research/plml</p>

<h2 id="æ‹“å±•å‚è€ƒ">æ‹“å±•å‚è€ƒ</h2>

<h3 id="astæŠ½è±¡è¯­æ³•æ ‘">ASTæŠ½è±¡è¯­æ³•æ ‘</h3>

<p>ä¸ºä»€ä¹ˆé¢å¤–è¯´ä¸€ä¸‹ASTæŠ½è±¡è¯­æ³•æ ‘ï¼Œå› ä¸ºä½ å¯ä»¥ input-&gt; ast -&gt; output Anythingã€‚</p>

<p>æ¯”å¦‚ä½ jsxè½¬æ¢å°ç¨‹åºæ¨¡ç‰ˆè¯­æ³•ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨reactè¯­æ³•æ¥å†™å°ç¨‹åºï¼Œå¦‚Taroã€‚<br />
mpvue, wepy, postcss â€¦â€¦ è¿™äº›éƒ½æ˜¯é€šè¿‡ASTè¿›è¡Œæ„å»ºè½¬æ¢çš„å·¥å…·ï¼Œes6 -&gt; es5, babel éƒ½æ˜¯ä½¿ç”¨ASTã€‚</p>

<p>ASTæŠ½è±¡è¯­æ³•æ ‘å¤§è‡´æµç¨‹ï¼š</p>

<p>Input ç”Ÿæˆ AST tree</p>

<p>ç„¶åé€šè¿‡ASTç±»å‹æ–­è¨€è¿›è¡Œç›¸åº”çš„è½¬æ¢</p>

<p>http://esprima.org/demo/parse.html</p>

<h3 id="åç¼–è¯‘å·¥å…·å…¨é›†">åç¼–è¯‘å·¥å…·å…¨é›†</h3>

<p>å°ç¨‹åº</p>

<p>https://github.com/qwerty472123/wxappUnpacker</p>

<p><code>æ¨è.Netã€C# é€†å‘åç¼–è¯‘å››å¤§å·¥å…·åˆ©å™¨</code></p>

<p>https://www.cnblogs.com/ldc218/p/8945892.html</p>

<p>2018å¹´æ”¯æŒjava8çš„Javaåç¼–è¯‘å·¥å…·æ±‡æ€»<br />
https://blog.csdn.net/yannqi/article/details/80847354</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to properly uninstall Service Workerï¼Ÿ]]></title>
    <link href="http://blog.w3cub.com/blog/2018/06/01/how-to-properly-uninstall-service-worker/"/>
    <updated>2018-06-01T15:10:43+00:00</updated>
    <id>http://blog.w3cub.com/blog/2018/06/01/how-to-properly-uninstall-service-worker</id>
    <content type="html"><![CDATA[<p>å¦‚ä½•æ­£ç¡®åœ°å¸è½½Service Workerï¼Ÿ</p>

<p>ä»¥ä¸‹é“¾æ¥ï¼Œ Google Developers Service Workerå·¥ä½œåŸç†ï¼š<br />
https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle#updates</p>

<p>ä½†æ˜¯å‡å¦‚æŸä¸€å¤©ä½ ç½‘ç«™ä¸éœ€è¦ Service Workerï¼Œå¦‚ä½•æ­£ç¡®åœ°å¸è½½å‘¢ï¼Ÿ</p>

<p>ä»¥ä¸‹ä»¥ create-react-app ä¸ºä¾‹å­:</p>

<!-- more -->

<ul>
  <li>åƒä¸‡ä¸è¦ç›´æ¥ä»æœåŠ¡å™¨å¹²æ‰ service-worker.js ï¼ˆsw.jsï¼‰ï¼Œæˆ–è€…å»æ‰ sw-precache-webpack-plugin æ’ä»¶ç›´æ¥buildã€‚</li>
</ul>

<ol>
  <li>å‡å¦‚ä½ æœåŠ¡å™¨æ˜¯å¢é‡æ›´æ–°çš„ï¼Œ<br />
<img src="https://user-images.githubusercontent.com/1061012/40846563-8b73ce96-65ec-11e8-8781-e374c38c77ba.png" alt="image" /></li>
</ol>

<p>é‚£ä¹ˆä½ çš„æœåŠ¡å™¨æ–‡ä»¶service-worker.jsæ°¸è¿œéƒ½åœ¨ï¼Œå‡å¦‚ç”¨æˆ·ä¹‹å‰è®¿é—®äº†ä½ çš„ç½‘ç«™ï¼Œå¹¶ä¸”ç”¨æˆ·ä¸æ¸…ç¼“å­˜çš„è¯ï¼Œcacheå°±æ°¸è¿œéƒ½åœ¨äº†ï¼Œä½ æ€ä¹ˆæ›´æ–°ï¼Œç”¨æˆ·è¿˜æ˜¯è®¿é—®æ—§çš„ç‰ˆæœ¬ã€‚</p>

<ol>
  <li>ä½ è¯´æŠŠä½ æœåŠ¡å™¨çš„ service-worker.js å¹²æ‰ï¼Œé‚£ä¹ˆå‡å¦‚ç”¨æˆ·ä¹‹å‰è®¿é—®è¿‡å‘¢ï¼Ÿæœ¬åœ°æœ‰ä¸€ä»½service-worker.jsï¼Œé‚£ä¹ˆæŒ‰ç…§service-workerå·¥ä½œåŸç†ï¼Œæœ¬åœ°ä¸€ç›´ç”Ÿæ•ˆï¼Œä¸ç®¡ä½ ç½‘ç«™æ€ä¹ˆæ›´æ–°ï¼Œç”¨æˆ·çœ‹åˆ°çš„ä¾æ—§æ˜¯æ—§çš„å†…å®¹ã€‚</li>
</ol>

<p>service-worker.js</p>

<pre><code class="language-js">
'use strict';

var precacheConfig = [
["/index.html","a16310808c31e9e89b8d72aa2ddb058c"],
["/plugin.dll.0cf858ac.js","7268282b6a4415b541c4658c1478febc"],
["/vendor.dll.830d2c27.js","097dfeec5dda4f277752cb36b5d548ee"]
];
var cacheName = 'sw-precache-v3-sw-precache-webpack-plugin-' + (self.registration ? self.registration.scope : '');


var ignoreUrlParametersMatching = [/^utm_/];



var addDirectoryIndex = function (originalUrl, index) {
    var url = new URL(originalUrl);
    if (url.pathname.slice(-1) === '/') {
      url.pathname += index;
    }
    return url.toString();
  };

var cleanResponse = function (originalResponse) {
    // If this is not a redirected response, then we don't have to do anything.
    if (!originalResponse.redirected) {
      return Promise.resolve(originalResponse);
    }

    // Firefox 50 and below doesn't support the Response.body stream, so we may
    // need to read the entire body to memory as a Blob.
    var bodyPromise = 'body' in originalResponse ?
      Promise.resolve(originalResponse.body) :
      originalResponse.blob();

    return bodyPromise.then(function(body) {
      // new Response() is happy when passed either a stream or a Blob.
      return new Response(body, {
        headers: originalResponse.headers,
        status: originalResponse.status,
        statusText: originalResponse.statusText
      });
    });
  };

var createCacheKey = function (originalUrl, paramName, paramValue,
                           dontCacheBustUrlsMatching) {
    // Create a new URL object to avoid modifying originalUrl.
    var url = new URL(originalUrl);

    // If dontCacheBustUrlsMatching is not set, or if we don't have a match,
    // then add in the extra cache-busting URL parameter.
    if (!dontCacheBustUrlsMatching ||
        !(url.pathname.match(dontCacheBustUrlsMatching))) {
      url.search += (url.search ? '&amp;' : '') +
        encodeURIComponent(paramName) + '=' + encodeURIComponent(paramValue);
    }

    return url.toString();
  };

var isPathWhitelisted = function (whitelist, absoluteUrlString) {
    // If the whitelist is empty, then consider all URLs to be whitelisted.
    if (whitelist.length === 0) {
      return true;
    }

    // Otherwise compare each path regex to the path of the URL passed in.
    var path = (new URL(absoluteUrlString)).pathname;
    return whitelist.some(function(whitelistedPathRegex) {
      return path.match(whitelistedPathRegex);
    });
  };

var stripIgnoredUrlParameters = function (originalUrl,
    ignoreUrlParametersMatching) {
    var url = new URL(originalUrl);
    // Remove the hash; see https://github.com/GoogleChrome/sw-precache/issues/290
    url.hash = '';

    url.search = url.search.slice(1) // Exclude initial '?'
      .split('&amp;') // Split into an array of 'key=value' strings
      .map(function(kv) {
        return kv.split('='); // Split each 'key=value' string into a [key, value] array
      })
      .filter(function(kv) {
        return ignoreUrlParametersMatching.every(function(ignoredRegex) {
          return !ignoredRegex.test(kv[0]); // Return true iff the key doesn't match any of the regexes.
        });
      })
      .map(function(kv) {
        return kv.join('='); // Join each [key, value] array into a 'key=value' string
      })
      .join('&amp;'); // Join the array of 'key=value' strings into a string with '&amp;' in between each

    return url.toString();
  };


var hashParamName = '_sw-precache';
var urlsToCacheKeys = new Map(
  precacheConfig.map(function(item) {
    var relativeUrl = item[0];
    var hash = item[1];
    var absoluteUrl = new URL(relativeUrl, self.location);
    var cacheKey = createCacheKey(absoluteUrl, hashParamName, hash, /\.\w{8}\./);
    return [absoluteUrl.toString(), cacheKey];
  })
);

function setOfCachedUrls(cache) {
  return cache.keys().then(function(requests) {
    return requests.map(function(request) {
      return request.url;
    });
  }).then(function(urls) {
    return new Set(urls);
  });
}

self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return setOfCachedUrls(cache).then(function(cachedUrls) {
        return Promise.all(
          Array.from(urlsToCacheKeys.values()).map(function(cacheKey) {
            // If we don't have a key matching url in the cache already, add it.
            if (!cachedUrls.has(cacheKey)) {
              var request = new Request(cacheKey, {credentials: 'same-origin'});
              return fetch(request).then(function(response) {
                // Bail out of installation unless we get back a 200 OK for
                // every request.
                if (!response.ok) {
                  throw new Error('Request for ' + cacheKey + ' returned a ' +
                    'response with status ' + response.status);
                }

                return cleanResponse(response).then(function(responseToCache) {
                  return cache.put(cacheKey, responseToCache);
                });
              });
            }
          })
        );
      });
    }).then(function() {
      
      // Force the SW to transition from installing -&gt; active state
      return self.skipWaiting();
      
    })
  );
});

self.addEventListener('activate', function(event) {
  var setOfExpectedUrls = new Set(urlsToCacheKeys.values());

  event.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return cache.keys().then(function(existingRequests) {
        return Promise.all(
          existingRequests.map(function(existingRequest) {
            if (!setOfExpectedUrls.has(existingRequest.url)) {
              return cache.delete(existingRequest);
            }
          })
        );
      });
    }).then(function() {
      
      return self.clients.claim();
      
    })
  );
});


self.addEventListener('fetch', function(event) {
  if (event.request.method === 'GET') {
    // Should we call event.respondWith() inside this fetch event handler?
    // This needs to be determined synchronously, which will give other fetch
    // handlers a chance to handle the request if need be.
    var shouldRespond;

    // First, remove all the ignored parameters and hash fragment, and see if we
    // have that URL in our cache. If so, great! shouldRespond will be true.
    var url = stripIgnoredUrlParameters(event.request.url, ignoreUrlParametersMatching);
    shouldRespond = urlsToCacheKeys.has(url);

    // If shouldRespond is false, check again, this time with 'index.html'
    // (or whatever the directoryIndex option is set to) at the end.
    var directoryIndex = 'index.html';
    if (!shouldRespond &amp;&amp; directoryIndex) {
      url = addDirectoryIndex(url, directoryIndex);
      shouldRespond = urlsToCacheKeys.has(url);
    }

    // If shouldRespond is still false, check to see if this is a navigation
    // request, and if so, whether the URL matches navigateFallbackWhitelist.
    var navigateFallback = '/index.html';
    if (!shouldRespond &amp;&amp;
        navigateFallback &amp;&amp;
        (event.request.mode === 'navigate') &amp;&amp;
        isPathWhitelisted(["^(?!\\/__).*"], event.request.url)) {
      url = new URL(navigateFallback, self.location).toString();
      shouldRespond = urlsToCacheKeys.has(url);
    }

    // If shouldRespond was set to true at any point, then call
    // event.respondWith(), using the appropriate cache key.
    if (shouldRespond) {
      event.respondWith(
        caches.open(cacheName).then(function(cache) {
          return cache.match(urlsToCacheKeys.get(url)).then(function(response) {
            if (response) {
              return response;
            }
            throw Error('The cached response that was expected is missing.');
          });
        }).catch(function(e) {
          // Fall back to just fetch()ing the request if some unexpected error
          // prevented the cached response from being valid.
          console.warn('Couldn\'t serve response for "%s" from cache: %O', event.request.url, e);
          return fetch(event.request);
        })
      );
    }
  }
});

</code></pre>

<p>index.js å…¥å£æ–‡ä»¶</p>

<p>https://github.com/facebook/create-react-app/blob/next/packages/react-scripts/template/src/index.js</p>

<pre><code class="language-js">import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import * as serviceWorker from './serviceWorker';

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: http://bit.ly/CRA-PWA
serviceWorker.unregister();
//----vs-----
serviceWorker.register({
    onUpdate: async (registration) =&gt; {
        await registration.update();
        message.info("ç½‘ç«™æ›´æ–°å®Œæˆ, è¯·åˆ·æ–°é¡µé¢: " + moment().format('YYYY-MM-DD HH:mm:ss'), 0.5, () =&gt; {
            window.location.reload();
        });
    },
    onSuccess: () =&gt; {}
});



</code></pre>

<p>å‡å¦‚ä½ å¼•å…¥äº†serviceWorkeræ–‡ä»¶, å¹¶å‘å¸ƒäº†ï¼Œ</p>

<p>https://github.com/facebook/create-react-app/blob/next/packages/react-scripts/template/src/serviceWorker.js</p>

<h3 id="æ­£ç¡®åšæ³•æ˜¯">æ­£ç¡®åšæ³•æ˜¯ï¼š</h3>
<p><code>serviceWorker.register();</code> æ”¹æˆ <code>serviceWorker.unregister();</code> <br />
ä½†æ˜¯åŒæ—¶åƒä¸‡è¦è®°ä½ è¦ä¿ç•™  sw-precache-webpack-plugin å»åšwebpack æ„å»ºï¼ˆç›®çš„æ˜¯ä¸ºäº†ç”Ÿæˆæ–°çš„service-worker.jsï¼Œè§¦å‘æ›´æ–°)ã€‚æŒ‰ç…§äººçš„<strong>æ—¢å®šæ€ç»´</strong>ï¼Œæ—¢ç„¶ä¸è¦äº†ï¼Œé‚£ä¹ˆå½“ç„¶è¦ç§»é™¤ã€‚</p>

<p>å‡å¦‚ç§»é™¤äº†  sw-precache-webpack-plugin,  ä½ æ€ä¹ˆ ç”Ÿæˆæ–°ç‰ˆæœ¬çš„ service-worker.jsï¼Œè¿˜æœ‰ï¼Œæ²¡æœ‰æ–°ç‰ˆæœ¬ service-worker.js åˆæ€ä¹ˆä¼šæ›´æ–°ä½ çš„ä»£ç äº†ï¼Œè¿™é‡Œä¼¼ä¹å‡ºç°<strong>åŒé‡é™·é˜±</strong>ï¼Œä½†æ˜¯å½“ä½ ç†è§£äº†service-worker.js ç”Ÿå‘½å‘¨æœŸåŸç†åï¼Œä¸€åˆ‡éƒ½å¯ä»¥ç†è§£ã€‚</p>

<h3 id="æœ€åæ€»ç»“">æœ€åæ€»ç»“ï¼š</h3>
<p>åœ¨å…¥å£åŠ å…¥:</p>

<p>serviceWorker.unregister();</p>

<p>service-worker.js æ–‡ä»¶ ä¾æ—§éœ€è¦æ›´æ–°ã€‚</p>

<p>å‡å¦‚çœŸçš„ä¸æƒ³å¼•å…¥ sw-precache-webpack-plugin åšwebpackæ„å»ºçš„è¯ï¼Œè¯·æŠŠæœåŠ¡å™¨ä¸Šé¢çš„<br />
service-worker.js  <code>precacheConfig</code> æ¸…ç©º</p>
<pre><code class="language-js">var precacheConfig = [
];
</code></pre>

<p>https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#opting-out-of-caching</p>

<p>If you would prefer not to enable service workers prior to your initial production deployment, then remove the call to registerServiceWorker() from src/index.js.</p>

<p>If you had previously enabled service workers in your production deployment and have decided that you would like to disable them for all your existing users, you can swap out the call to registerServiceWorker() in src/index.js first by modifying the service worker import:</p>
<pre><code>import { unregister } from './registerServiceWorker';
</code></pre>

<p>and then call unregister() instead. After the user visits a page that has unregister(), the service worker will be uninstalled. Note that depending on how /service-worker.js is served, it may take up to 24 hours for the cache to be invalidated.</p>

<p>create-react-app æç¤ºçš„æµ‹è¯•æœåŠ¡å™¨<br />
<img src="https://user-images.githubusercontent.com/1061012/40872668-b5ae9a72-6684-11e8-9d37-ba7d3fed427e.png" alt="image" /><br />
å¯¹service-worker.jsä¼šæœ‰HTTPç¼“å­˜ï¼Œéƒ¨ç½²ç®€å•nginx æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•</p>

<pre><code class="language-conf">    server {
       listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

       location / {
           root   D:\yourproject\build;
           index  index.html index.htm;
           # proxy_no_cache 1;
           add_header Cache-Control "no-cache";
           try_files $uri $uri/ /index.html;
       }

       location /service\-worker\.js {
            expires -1;
            add_header Pragma "no-cache";
       }
    }

</code></pre>

<pre><code>serviceWorker.register({
    onUpdate: async (registration) =&gt; {
        await registration.update(); // è¿™é‡Œå¾ˆé‡è¦
        message.info("ç½‘ç«™æ›´æ–°å®Œæˆ, è¯·åˆ·æ–°é¡µé¢: " + moment().format('YYYY-MM-DD HH:mm:ss'), 0.5, () =&gt; {
            window.location.reload();
        });
    },
    onSuccess: () =&gt; {}
});

</code></pre>

<h3 id="å»¶ä¼¸é˜…è¯»">å»¶ä¼¸é˜…è¯»ï¼š</h3>

<p>https://lavas.baidu.com/guide/v2/advanced/service-worker#%E6%B3%A8%E5%86%8C-service-worker-%E6%89%A9%E5%B1%95<br />
æ³¨å†Œ Service Worker (æ‰©å±•)</p>

<p>æç¤ºï¼šè¿™éƒ¨åˆ†å†…å®¹ç”± Lavas å†…éƒ¨å¤„ç†ï¼Œå¹¶ä¸éœ€è¦å¼€å‘è€…è¿›è¡Œå‚ä¸ï¼Œä»…ä»…ä½œä¸ºè§£ç­”å¼€å‘è€…ç–‘é—®çš„æ‰©å±•é˜…è¯»å­˜åœ¨ã€‚</p>

<p>Service Worker ç¼–å†™å®Œæˆåï¼Œè¿˜éœ€è¦è¿›è¡Œæ³¨å†Œæ‰èƒ½çœŸæ­£ç”Ÿæ•ˆã€‚å¸¸è§„çš„æ³¨å†Œä»£ç èƒ½å¤Ÿåœ¨å„ç±» Service Worker æ•™ç¨‹æˆ–æ–‡ç« ä¸­æ‰¾åˆ°ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªä¸å¾—ä¸è€ƒè™‘çš„é—®é¢˜ï¼Œä½¿å¾—æˆ‘ä»¬å¿…é¡»å¯¹æ³¨å†Œä»£ç è¿›è¡Œä¸€äº›æ”¹åŠ¨ï¼Œé‚£å°±æ˜¯ Service Worker æ›´æ–° çš„é—®é¢˜ã€‚</p>

<p>https://github.com/lavas-project/sw-register-webpack-plugin</p>

<p>ç¦»çº¿æŒ‡å—<br />
https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network</p>

<p>å‡å¦‚ç†Ÿæ‚‰Service Worker ç¼“å­˜æœºåˆ¶çš„è¯ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦å¸è½½å‘¢ ï¼Ÿ</p>

<p>æœ¬æ–‡ ï¼š https://github.com/icai/icai.github.io/issues/1</p>

<p>-EOF-</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã€Šhtml5æ•°æ®æ¨é€åº”ç”¨å¼€å‘ã€‹è¯»ä¹¦æ‘˜è¦]]></title>
    <link href="http://blog.w3cub.com/blog/2017/08/06/sse-data-push-note/"/>
    <updated>2017-08-06T09:18:14+00:00</updated>
    <id>http://blog.w3cub.com/blog/2017/08/06/sse-data-push-note</id>
    <content type="html"><![CDATA[<p>ä¹¦å¾ˆè–„ï¼Œåœ¨å›¾ä¹¦é¦†ç„äº†ä¸€ä¸‹ï¼ŒçŸ¥è¯†ç‚¹ä¸å¤šã€‚<br />
åŸºæœ¬ä¸Šç¬¬äºŒç« åŸºæœ¬è®²å®Œï¼Œå…¶ä»–è®²è§£éƒ½æ˜¯ä¸€äº›æ“¦è¾¹çš„ï¼Œå…¼å®¹æ€§ï¼Œå®‰å…¨æ€§ï¼Œâ€¦â€¦<br />
å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹ï¼š</p>

<!-- more -->

<p>ã€ŠData Push Apps with HTML5 SSEã€‹ è¯»ä¹¦æ‘˜è¦</p>

<h2 id="æ‘˜è¦">æ‘˜è¦</h2>

<ul>
  <li>EventSourceæ–¹æ³• new EventSource(â€œurlâ€);</li>
  <li>MIMEç±»å‹text/event-stream</li>
  <li>æ•°æ®ä¼ è¾“æ ¼å¼â€data:â€ + new Date().toISOString() + â€œ\n\nâ€;</li>
</ul>

<h2 id="sseç¤ºä¾‹">SSEç¤ºä¾‹</h2>

<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;Basic SSE Example&lt;/title&gt;
&lt;script src="//code.jquery.com/jquery-1.11.0.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;pre id="x"&gt;Initializing...&lt;/pre&gt;
&lt;script&gt;
    var es = new EventSource("basic_sse.php");
    es.addEventListener("message", function(e){
        $("#x").append("\n" + e.data);
    },false);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<pre><code class="language-javascript">var http = require("http"),
    fs = require("fs");
var port = parseInt(process.argv[2] || 1234);
http.createServer(function(request, response) {
    console.log("Client connected:" + request.url);
    if (request.url != "/sse") {
        fs.readFile("basic_sse.html", function(err, file) {
            response.writeHead(200, { 'Content-Type': 'text/html' });
            var s = file.toString(); //file is a buffer
            s = s.replace("basic_sse.php", "sse");
            response.end(s);
        });
        return;
    }
    //Below is to handle SSE request. It never returns.
    response.writeHead(200, { "Content-Type": "text/event-stream" });
    var timer = setInterval(function() {
        var content = "data:" + new Date().toISOString() + "\n\n";
        var b = response.write(content);
        if (!b) console.log("Data got queued in memory (content=" + content + ")");
        else console.log("Flushed! (content=" + content + ")");
    }, 1000);
    request.connection.on("close", function() {
        response.end();
        clearInterval(timer);
        console.log("Client closed connection. Aborting.");
    });
}).listen(port);
console.log("Server running at http://localhost:" + port);
</code></pre>

<h2 id="å…¼å®¹æ€§">å…¼å®¹æ€§</h2>

<p>startEventSource()</p>

<ul>
  <li>Basically all Firefox and Chromea</li>
  <li>Desktop Safari 5.0+</li>
  <li>iOS Safari 4.0+</li>
  <li>Android 4.4+ (earlier where Chrome is default browser)</li>
  <li>Chrome for Android (all versions)</li>
  <li>Firefox for Android (all versions)</li>
  <li>Opera since 11.0</li>
  <li>Opera Mobile since 11.1</li>
  <li>BlackBerry since 7.0</li>
</ul>

<p>startXHR()</p>

<ul>
  <li>IE10+</li>
  <li>Firefox 3.6 (and earlier)</li>
  <li>Safari 3.x</li>
  <li>Android 4.1 to 4.3 (unless Chrome is default browser)</li>
  <li>Android 3.x</li>
</ul>

<p>startIframe()</p>

<ul>
  <li>IE8</li>
  <li>IE9</li>
</ul>

<p>~~startLongpoll()</p>
<ul>
  <li>IE6</li>
  <li>IE7</li>
  <li>Android 2.x</li>
  <li>Anything else not in the preceding list that has Ajax support<br />
~~</li>
</ul>

<p>~~(none)</p>
<ul>
  <li>Any browser with JavaScript disabled<br />
~~</li>
</ul>

<p>~~a Technically since Firefox 6 and Chrome 6, but they have been auto-updating since Firefox 4, and Chrome since it came out<br />
of beta, so you can reasonably expect no one is still using versions that do not support SSE.<br />
~~</p>

<p>ä¹¦æœ¬ä»£ç ï¼Œä¹¦æœ¬ä»£ç ï¼Œä¹¦æœ¬ä»£ç ã€‚</p>

<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>

<ul>
  <li><a href="https://github.com/DarrenCook/ssebook">ä¹¦æœ¬ä»£ç </a></li>
  <li><a href="https://caniuse.com/#feat=eventsource">eventsourceæµè§ˆå™¨æ”¯æŒ</a></li>
  <li><a href="https://www.w3.org/TR/eventsource/">https://www.w3.org/TR/eventsource/</a></li>
  <li><a href="https://html.spec.whatwg.org/multipage/server-sent-events.html">HTML Living Standard: Server-sent events</a></li>
  <li><a href="https://github.com/Yaffle/EventSource">a polyfill for http://www.w3.org/TR/eventsource/</a></li>
</ul>

<h2 id="å…¶ä»–å‚è€ƒ">å…¶ä»–å‚è€ƒ</h2>

<ul>
  <li><a href="https://www.ibm.com/developerworks/library/wa-http-server-push-with-websocket-sse/">HTTP server push with WebSocket and SSE</a></li>
  <li><a href="https://www.zhihu.com/question/27498235">Ajaxé•¿è½®è¯¢ä¸æœåŠ¡å™¨æ¨çš„é•¿è¿æ¥çš„åŒºåˆ«æ˜¯ï¼Ÿ</a></li>
  <li><a href="http://goeasy.io/cn/demos">å•†ä¸šåŒ–ç¤ºä¾‹</a></li>
</ul>

<p>-EOF-</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢æ­£åˆ™è¡¨è¾¾å¼æ¢ç©¶]]></title>
    <link href="http://blog.w3cub.com/blog/2015/07/15/fuzzy-scoring-regex-mayhem-zh/"/>
    <updated>2015-07-15T14:09:43+00:00</updated>
    <id>http://blog.w3cub.com/blog/2015/07/15/fuzzy-scoring-regex-mayhem-zh</id>
    <content type="html"><![CDATA[<p>Autocompletion is never an entirely solved problem. Can anyone really say what on earth a user typing â€œuniâ€ into a country input field actually intends to select? It could match any of these:</p>

<p>è‡ªåŠ¨å®Œæˆä¸€ç›´éƒ½æ˜¯ä¸€ä¸ªæ²¡å®Œæ²¡äº†çš„é—®é¢˜ã€‚è°èƒ½å‡†ç¡®åœ°è¯´å‡ºå½“ä¸€ä¸ªåœ°çƒäººåœ¨ä¸€ä¸ªå›½å®¶è¾“å…¥æ¡†è¾“å…¥â€œuniâ€æ‰“ç®—é€‰ä»€ä¹ˆï¼Ÿå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p>

<ul>
  <li>Tanzania, [<strong>U</strong>][<strong>n</strong>][<strong>i</strong>]ted Republic of</li>
  <li>[<strong>U</strong>][<strong>n</strong>][<strong>i</strong>]ted Arab Emirates</li>
  <li>[<strong>U</strong>][<strong>n</strong>][<strong>i</strong>]ted Kingdom</li>
  <li>[<strong>U</strong>][<strong>n</strong>][<strong>i</strong>]ted States</li>
  <li>T[<strong>u</strong>][<strong>n</strong>][<strong>i</strong>]sia</li>
</ul>

<p>Of course, itâ€™s probably not the last one, but that right there is a human intuition that we often forget to instil into these UI interactions.</p>

<p>å½“ç„¶ï¼Œè¿™å¯èƒ½ä¸æ˜¯æœ€åä¸€ä¸ªï¼Œä½†äººç±»çš„ç›´è§‰é€šå¸¸ä¼šå¿˜è®°çŒè¾“è¿™äº›UIäº¤äº’ã€‚</p>

<!-- more -->

<p>We can divine what the user <em>probably</em> intends most of the time but itâ€™ll always be a game of heuristics. Most solutions shy away from this game, opting instead to match the query letter-for-letter in each potential value, and this is usually sufficient, but without any other logic not only will â€œlaâ€ match â€œLatviaâ€ but also â€œAngolaâ€. And usually â€œLtviaâ€ will match nothing whatsoever, even though itâ€™s seemingly obvious what the user is trying to type.</p>

<p>æˆ‘ä»¬å¯ä»¥æ¨æ–­ç”¨æˆ·åœ¨è¿™ä¸Šé¢èŠ±è´¹çš„æ—¶é—´ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸€ä¸ªå¯å‘å¼æ¸¸æˆã€‚å¤§å¤šæ•°è§£å†³æ–¹æ¡ˆéƒ½æ˜¯å°è¯•åŒ¹é…å­—æ¯ä¹‹é—´å¯èƒ½æ½œåœ¨çš„å€¼ï¼Œé€šå¸¸å·²ç»è¶³å¤Ÿäº†ï¼Œâ€œlaâ€ æ²¡æœ‰ä»»ä½•é€»è¾‘ï¼Œä¼šåŒ¹é… â€œLatviaâ€ ä¹Ÿä¼šåŒ¹é… â€œAngolaâ€ã€‚ä½†ç»ä¸ä¼šåŒ¹é… â€œLtviaâ€ï¼Œå°½ç®¡â€œLtviaâ€çœ‹ä¼¼æ˜¯ç”¨æˆ·æƒ³è¦çš„è¾“å…¥ç±»å‹ã€‚</p>

<p>If you try implementing a fuzzy matcher to solve this, the first revelation is that you canâ€™t just boolean-match the query against the data like so many solutions do. You need to score each potential match. Hopefully, in the case of country selection, you end up with a sensible subset of countries that match the query to some reasonable degree. This scoring is necessary so that you know what youâ€™re putting at the top of the list. When typing â€œUâ€, the user expects Ukraine or Uzbekistan sooner than Mauritius or Sudan, for example.</p>

<p>å‡å¦‚ä½ æƒ³ç”¨æ¨¡ç³ŠåŒ¹é…å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œä½ ä¸èƒ½åƒå¾€å¸¸é‚£æ ·ç”¨booleanåŒ¹é…å»è¯·æ±‚æŸ¥è¯¢æ•°æ®ã€‚ä½ éœ€è¦è®¡ç®—æ¯ä¸ªå­˜åœ¨åŒ¹é…çš„åˆ†æ•°ã€‚ åœ¨é€‰æ‹©å›½å®¶æƒ…å†µä¸‹ï¼Œä½ æœ€ç»ˆéœ€è¦è¯·æ±‚åŒ¹é…æŸ¥è¯¢ä¸€äº›åˆç¬¦é€»è¾‘çš„åˆç†çš„å›½å®¶å­é›†ã€‚é‚£ä¹ˆè¿™åˆ†æ•°æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬æ’åˆ°åˆ—è¡¨çš„é¡¶éƒ¨ã€‚</p>

<p>ï¼ˆè¯‘æ³¨, booleanåŒ¹é… <a href="https://github.com/bevacqua/fuzzysearch">https://github.com/bevacqua/fuzzysearch</a>ï¼‰</p>

<p>Oddly, if you looked at the most common autocompletion widget out there (jQuery UI), it <a href="http://jsfiddle.net/2c11xknm/embedded/result,js,html">doesnâ€™t appear</a> to follow this intuition.</p>

<p>å¥‡æ€ªçš„æ˜¯ï¼Œå‡å¦‚è§è¿‡æœ€å¸¸ç”¨çš„jQuery UI è‡ªåŠ¨å®Œæˆï¼ˆautocompletionï¼‰æ’ä»¶ï¼Œä»–å¹¶æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>Even the most <a href="http://baymard.com/labs/country-selector">graceful</a> solutions tend to avoid the muddiness of dealing with mistakes like â€œuntied statesâ€ or â€œleichtensteinâ€. Sure, the likeliness of a person having to type the name of a country they arenâ€™t intimately familiar with is probably quite low, but people still make mistakes.</p>

<p>å³ä½¿æ˜¯æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œéƒ½è¶‹å‘äºå¿½è§†æ¨¡ç³Šå¤„ç†é”™è¯¯ï¼Œåƒâ€œuntied statesâ€ ï¼ˆunited statesï¼‰ å’Œ â€œleichtensteinâ€ ï¼ˆliechtenstein ï¼‰ã€‚å½“ç„¶ï¼Œ å°±åƒä¸€ä¸ªäººè¾“å…¥ä¸€ä¸ªå›½å®¶çš„åå­—ï¼Œä»–ä»¬ä¸ç†Ÿæ‚‰è¿™ä¸ªå›½å®¶å¯èƒ½æ€§æ˜¯éå¸¸å¾ˆä½ã€‚ä½†äººä»¬ä»ç„¶ä¼šçŠ¯é”™è¯¯ã€‚</p>

<p>Iâ€™ve been intrigued by this topic for quite a while and itâ€™s why I originally made <a href="https://github.com/padolsey/relevancy.js">relevancy.js</a>. It solves the problem quite well, I think, and it does so in a pretty transparent way, with scores applied for various qualities such as the index of the query within the target string (â€œkingâ€ scores higher than â€œdomâ€ in â€œkingdomâ€, for example), but itâ€™s still a quite a lot of code for such a tiny part of an overall user experience.</p>

<p>æˆ‘ä¸€ç›´è¢«è¿™ä¸ªè¯é¢˜å¸å¼•äº†å¾ˆé•¿æ—¶é—´ï¼Œä¹Ÿæ˜¯æˆ‘å†™ <a href="https://github.com/padolsey/relevancy.js">relevancy.js</a> çš„åŸå› ã€‚å®ƒå¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç±»ä¼¼é—®é¢˜ï¼Œæˆ‘æƒ³ï¼Œä»–çš„åŸç†æ˜¯éå¸¸æ˜¾è€Œæ˜“è§çš„ï¼Œå°±æ˜¯é€šè¿‡åˆ†æ•°å»åŒºåˆ†ä¸åŒå“è´¨ï¼ˆæŠŠåˆ†æ•°åº”ç”¨äºå“è´¨ï¼‰ä¾‹å¦‚ï¼Œç›®æ ‡å­—ç¬¦ä¸²æŸ¥è¯¢çš„ç´¢å¼•(æ­£å¦‚åœ¨æŸ¥è¯¢â€œkingdomâ€ â€œçš„æ—¶å€™ï¼Œkingâ€çš„åˆ†æ•°æ¯” â€œdomâ€é«˜)ã€‚ä½†è¿™è¿˜æ˜¯éœ€è¦ç›¸å½“å¤šçš„ä»£ç å»å®ç°è¿™å°éƒ¨åˆ†ï¼Œç›¸å¯¹äºè¿™æ ·ä¸€ä¸ªæ•´ä½“ç”¨æˆ·ä½“éªŒçš„è€Œè¨€ã€‚</p>

<p>I have once again been playing with this problem (thanks to a certain <a href="https://twitter.com/codepo8/status/572863924887945216">tweet</a>) and have so wanted to come up with something stupefyingly graceful.</p>

<p>æˆ‘åˆå†ä¸€æ¬¡é‡ä¸Šäº†è¿™ä¸ªé—®é¢˜ï¼ˆè°¢è°¢ <a href="https://twitter.com/codepo8/status/572863924887945216">tweet</a> çš„è‚¯å®šï¼‰ï¼Œæˆ‘æƒ³å¯ä»¥å†™çš„æ›´åŠ ä¼˜é›…ã€‚</p>

<p>It all starts with a scratch in back of your mind â€” the one that tells you that your time has come. The <a href="http://xkcd.com/208/">world requires you</a> to use regular expressions.</p>

<p>ä¸€åˆ‡ä»å¤´å¼€å§‹åœ¨ä½ çš„è„‘æµ·é‡Œï¼Œè¿™å‘Šè¯‰ä½ çš„æ—¶é—´åˆ°äº†ã€‚<a href="http://xkcd.com/208/">world requires you</a> ï¼ˆä¸–ç•Œéœ€è¦ä½ ï¼‰ ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>

<p><strong>Warning:</strong> I donâ€™t sincerely recommend doing any of this. Itâ€™s just a bit of fun. Itâ€™s probably an inefficient, unreliable, obscure and ultimately foolish endeavour!</p>

<p>Warningï¼š åˆ«åˆ†å¿ƒï¼Œä¸ç„¶æ•ˆç‡æä½çš„ï¼Œbebebeï½ï½ï½</p>

<h2 id="lets-begin">Letâ€™s begin!</h2>

<p>##æˆ‘ä»¬å…¥æ­£é¢˜ï¼š</p>

<p>A static France might look like this:</p>

<p>é™æ€å­—ç¬¦ä¸²France æ­£åˆ™ï¼š</p>

<pre><code>/^France$/
</code></pre>

<p>A more lenient France might be less sensitive to its case:</p>

<p>ä¸åŒºåˆ†å¤§å°å†™ï¼š</p>

<pre><code>/^france$/i
</code></pre>

<p>We could then allow the characters to be optional too:</p>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å…è®¸å­—ç¬¦æ˜¯å¯é€‰çš„</p>

<pre><code>/^f?r?a?n?c?e?$/i
</code></pre>

<p>This would match â€œfâ€ and â€œfrancâ€ and â€œFaEâ€, etc.</p>

<p>è¿™ä¼šåŒ¹é… â€œfâ€ï¼Œ â€œfrancâ€ å’Œ â€œFaEâ€ç­‰ç­‰ã€‚</p>

<p>Butâ€¦ users make even more grievous mistakes sometimes, and our regular expression should be able to handle those. So letâ€™s add a single character of leniency between each legitimate character, and at the beginning and end of the string:</p>

<p>ä½†â€¦â€¦ ç”¨æˆ·æœ‰æ—¶çŠ¯æ›´ä¸¥é‡çš„é”™è¯¯ï¼Œæˆ‘ä»¬çš„æ­£å¸¸è¡¨è¾¾åº”è¯¥èƒ½å¤Ÿå¤„ç†è¿™äº›é”™è¯¯ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬åœ¨æ¯ä¸€ä¸ªåˆç†çš„å­—æ¯ä¹‹é—´åŠ ä¸Šä¸€ä¸ªå®½å®¹çš„å­—ç¬¦åœ¨æ¯ä¸ªå­—ç¬¦çš„å‰åã€‚</p>

<pre><code>/^.?f?.?r?.?a?.?n?.?c?.?e?.?$/i
</code></pre>

<p>But then this would allow contiguous mistakes like â€œfafafafaâ€. We only want to allow a <em>single</em> incorrect mistake after each successfully entered character. For this we can use groups to force each character to be matched and a lazy quantifier on the mistake character to ensure that legitimate characters get to successfully match.</p>

<p>ä½†å½“è¿™å…è®¸è¿ç»­é”™è¯¯åƒâ€œfafafafaâ€ï¼Œæˆ‘ä»¬åªå…è®¸ä¸€ä¸ªå•ä¸€çš„é”™è¯¯åœ¨æ¯ä¸ªæ­£ç¡®è¾“å…¥å­—ç¬¦ä¹‹åã€‚ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†ç»„å¼ºåˆ¶æ¯ä¸ªå­—ç¬¦åŒ¹é…å’Œæ‡’æƒ°åŒ¹é…çš„é”™è¯¯çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿åˆæ³•å­—ç¬¦å¯ä»¥æˆåŠŸåŒ¹é…ã€‚</p>

<p>So:</p>

<pre><code>/f.?otherStuff/
</code></pre>

<p>Becomes:</p>

<pre><code>/(?:f.??)?otherStuff/
</code></pre>

<p>In English: Try to match <code>f</code> followed by <code>otherStuff</code>. If impossible then try to match any character after <code>f</code> but before <code>otherStuff</code>. (This is why lazy quantifiers (e.g. <code>??</code>) are so useful!)</p>

<p>å°±æ˜¯è¯´ï¼Œå°è¯•åŒ¹é…è·Ÿåœ¨otherStuffä¹‹å‰çš„fã€‚å¦‚æœä¸å¯èƒ½çš„è¯ï¼Œå°è¯•åŒ¹é…ä»»ä½•åœ¨â€œfâ€ ä¹‹åï¼Œåœ¨â€œotherStuffâ€ ä¹‹å‰çš„å­—ç¬¦ã€‚</p>

<p>The entire regex would become:</p>

<p>å®Œæ•´çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå˜æˆï¼š</p>

<pre><code>/^(?:.(?=f))?(?:f.??)?(?:r.??)?(?:a.??)?(?:n.??)?(?:c.??)?(?:e.??)?$/i
</code></pre>

<p>We should probably capture each individual match (<code>f</code> should be <code>(f)</code>) so that we can analyze the result and score it appropriately.</p>

<p>æˆ‘ä»¬å¯èƒ½éœ€è¦æ•è·æ¯ä¸ªå•ç‹¬çš„åŒ¹é…(<code>f</code> åº”è¯¥æ˜¯<code>(f)</code>) ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åˆ†æç»“æœå¹¶é€‚å½“åœ°è¯„åˆ†ã€‚</p>

<pre><code>var r = /^(?:(f).??)?(?:(r).??)?(?:(a).??)?(?:(n).??)?(?:(c).??)?(?:(e).??)?$/i

'f$R-aN_cEx'.match(r);
// =&gt; ["f$R-aN_cEx", "f", "R", "a", "N", "c", "E"]
</code></pre>

<p>The regular expression, broken down:</p>

<p>æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š</p>

<pre><code>/
  ^       # Start of string

  (?:     # Non-captured groupï¼ˆéæ•è·ï¼‰
    (f)   # Match and capture 'f' ï¼ˆåŒ¹é…å¹¶æ•è·"f"ï¼‰
    .??   # Followed lazily by any character ï¼ˆæ‡’æƒ°åŒ¹é…è·Ÿéšå­—ç¬¦ï¼‰
  )?      # Entire group is optional ï¼ˆç»„å¯é€‰ï¼‰

  (?:     # Non-captured group
    (r)   # Match and capture 'f'
    .??   # Followed lazily by any character
  )?      # Entire group is optional

  ...     # Etc.

  $       # End of string
/i
</code></pre>

<p><em>A quick note</em>: <em>lazy</em> or <em>lazily</em> in the context of regular expressions simply means that that thing will be intentionally excluded from the first match attempt and will only be used if the subsequent regular expression is unsuccessful without it.</p>

<p>å°ä¾¿ç­¾ï¼šæ­£åˆ™è¡¨è¾¾å¼ä¸­æ‡’æƒ°åŒ¹é…æ˜¯æŒ‡â€¦â€¦</p>

<p>One caveat with the above regex is that it doesnâ€™t allow a mistake to be at the beginning of the string. We could fix this with a lookahead to the effect of â€œallow a mistake here as long as its followed by a non-mistakeâ€ but since â€œnon-mistakeâ€ could effectively be any character in the legitimate string itâ€™s easier to just make allowances for that initial mistake in each group. Additionally, we probably want to capture every single mistake, in addition to legitimate characters. Hereâ€™s our next iteration:</p>

<p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒä¸å…è®¸åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æœ‰é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥ä¿®å¤è¿™ä¸ªå‰ç»é”™è¯¯é€šè¿‡ â€œå…è®¸çŠ¯é”™è¯¯ï¼Œåªè¦å®ƒè·Ÿåœ¨ä¸€ä¸ªéé”™è¯¯åé¢â€ï¼Œ ä½†ç”±äº â€œéé”™è¯¯â€ å¯ä»¥æœ‰æ•ˆåœ°åœ¨åˆæ³•å­—ç¬¦ä¸²ä¸­çš„ä»»ä½•å­—ç¬¦ï¼Œä½¿å¾—å®ƒæ›´å®¹æ˜“åœ¨æ¯ä¸ªç»„ä¸­å‡ºç°æ‰€å…è®¸çš„åˆå§‹é”™è¯¯ã€‚æ­¤å¤–ï¼Œé™¤äº†åˆæ³•çš„å­—ç¬¦ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½è¦æ•æ‰æ¯ä¸€ä¸ªé”™è¯¯ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„å®ç°ï¼š</p>

<pre><code>/
  ^         # Start of string

  (?:       # Non-captured group

    (^.)?   # Captured optional mistake at the beginning of the string
            # ===============================================

    (f)     # Match and capture 'f'
    (.??)   # Followed lazily by any character (captured)
  )?        # Entire group is optional

  ...     # Etc.

  $       # End of string
/i
</code></pre>

<p>The check <code>(^.)?</code> has to be specified in each group, to account for mistakes that donâ€™t involve â€œfâ€, like â€œkranceâ€ or â€œttanceâ€, etc.</p>

<p>æ£€æŸ¥<code>(^.)?</code>å¿…é¡»æ¯ç»„éƒ½æŒ‡å®š, ä»¥ä¾¿è€ƒè™‘é”™è¯¯ä¸æ¶‰åŠåˆ° â€œfâ€, å°±åƒ â€œkranceâ€ å’Œ â€œttanceâ€, ç­‰ç­‰ã€‚</p>

<p>Since weâ€™re aiming to genericize this entire mess, we should create a generator that assembles the regular expression given any piece of text:</p>

<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ˜¯è¦å»å¤„ç†è¿™ä¸€ç±»é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç”Ÿæˆå™¨å»ç»„è£…å°†ç»™å®šçš„æ–‡æœ¬é›†åˆçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>

<pre><code>function makeFuzzyRegex(string) {

  if (!string) { return /^$/; }

  // Escape any potential special characters:
  var cleansed = string.replace(/\W/g, '\\$&amp;');

  return RegExp(
    '^' +
      cleansed.replace(
        // Find every escaped and non-escaped char:
        /(\\?.)/g,
        // Replace with fuzzy character matcher:
        '(?:(^.)?($1)(.??))?'
      ) +
    '$',
    'i'
  );
}

makeFuzzyRegex('omg');
// =&gt; /^(?:(^.)?(o)(.??))?(?:(^.)?(m)(.??))?(?:(^.)?(g)(.??))?$/i
</code></pre>

<p>This regex matched against â€˜_o-m*g!â€™ produces:</p>

<pre><code>[
  // Full match:
  "_o-m*g!",

  // Captures:
  "_",           // Mistake
  "o",           // Legit
  "-",           // Mistake

  undefined,     // Void mistake
  "m",           // Legit
  "*",           // Mistake

  undefined,     // Void mistake
  "g",           // Legit
  "!"            // Mistake
]
</code></pre>

<p>The captures are in groups of three, with every second capture being the legitimate character (case-insensitive), and with every first and third potentially being mistakes.</p>

<p>æ•è·æ˜¯åœ¨ä¸‰ç»„ï¼Œæ¯ç»„æ•è·éƒ½æ˜¯åˆæ³•æ€§ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼Œå¹¶ä¸æ¯ç»„ç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦éƒ½å¯èƒ½æ½œåœ¨é”™è¯¯ã€‚</p>

<p>We can then loop through these captures and apply weights as we see fit.</p>

<p>æˆ‘ä»¬å¯ä»¥å¾ªç¯è¿™äº›æ•æ‰å’Œåº”ç”¨æƒé‡ä½œä¸ºæˆ‘ä»¬åˆé€‚çš„åˆ†æ•°ã€‚</p>

<pre><code>var fullMatch = makeFuzzyRegex('omg').exec('_o-m*g!');
var captures = fullMatch.slice(1); // Get captures specifically
var score = 0;

for (var i = 0, l = captures.length; i &lt; l; i += 3) {
  if (captures[i]) score -= 1;
  if (captures[i+1]) score += 10;
  if (captures[i+2]) score -= 1;
}

score; // =&gt; 26
</code></pre>

<p>That scoring is quite arbitrary, but weâ€™ve at least prescribed our wish to score successes more than we punish mistakes (10 vs 1).</p>

<p>è¿™è®¡ç®—æ˜¯ååˆ†éšæ„çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è‡³å°‘æŒ‡å®šæˆ‘ä»¬çš„æ„¿æœ›æ¯”æˆ‘ä»¬æƒ©ç½šçš„é”™è¯¯æ›´æˆåŠŸ(10 vs 1)ã€‚</p>

<p>We can start to play with the heuristics of this if we wrap it all up:</p>

<p>æˆ‘ä»¬æŠŠå®ƒå°è£…èµ·æ¥ï¼Œè®©Taæºœæºœï¼š</p>

<pre><code>function createFuzzyScorer(text) {

  var matcher = makeFuzzyRegex(text);

  return function(query) {
    var match = matcher.exec(query);

    if (!match) return 0;

    var captures = match.slice(1);
    var score = 0;

    for (var i = 0, l = captures.length; i &lt; l; i += 3) {
      if (captures[i]) score -= 1;
      if (captures[i+1]) score += 10;
      if (captures[i+2]) score -= 1;
    }

    return score;
  };

  function makeFuzzyRegex(string) {

    if (!string) { return /^$/; }

    // Escape any potential special characters:
    var cleansed = string.replace(/\W/g, '\\$&amp;');

    return RegExp(
      '^' +
        cleansed.replace(
          // Find every escaped and non-escaped char:
          /(\\?.)/g,
          // Replace with fuzzy character matcher:
          '(?:(^.)?($1)(.??))?'
        ) +
      '$',
      'i'
    );
  }
}
</code></pre>

<p>Our first attempt isnâ€™t too bad:</p>

<p>æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å°è¯•å¹¶ä¸å¤ªåï¼š</p>

<pre><code>var score = createFuzzyScorer('omg');

score('omg');     // =&gt; 30
score('xOmg');    // =&gt; 29
score('.o.m.g.'); // =&gt; 26
score('om');      // =&gt; 20
score('og');      // =&gt; 20
score('o');       // =&gt; 10
score('nope');    // =&gt; 0
</code></pre>

<p>These seem like sensible enough scores, generally, but weâ€™re more interested in autocompletion, and so thereâ€™s an obvious predictive element there. If a user types â€˜oâ€™ then that should probably score higher than â€˜gâ€™ if weâ€™re testing against â€˜omgâ€™, but with the above mechanism they both receive a standard 10:</p>

<p>è¿™ä¼¼ä¹æ˜¯å¯æ„ŸçŸ¥çš„è¶³å¤Ÿçš„åˆ†æ•°ï¼Œä¸€èˆ¬ï¼Œä½†æˆ‘ä»¬åœ¨è‡ªåŠ¨å®Œæˆæ›´æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªæ˜æ˜¾çš„é¢„æµ‹å…ƒç´ çš„å­˜åœ¨ã€‚å½“æˆ‘ä»¬æˆ‘ä»¬æµ‹è¯•â€˜omgâ€™æ—¶ï¼Œå¦‚æœç”¨æˆ·é”®å…¥â€oâ€é‚£åº”è¯¥å¾—åˆ†é«˜äºâ€gâ€ï¼Œä½†ä¸Šè¿°æ–¹æ³•éƒ½æ¥å—æ ‡å‡†çš„10ï¼š</p>

<pre><code>var score = createFuzzyScorer('omg');

score('o'); // =&gt; 10
score('g'); // =&gt; 10
</code></pre>

<p>We can fix this by applying a higher weight to matches that appear earlier in the string:</p>

<p>æˆ‘ä»¬å¯ä»¥ç”¨æ›´é«˜çš„æƒé‡æ¥è§£å†³å­—ç¬¦ä¸²ä¸­è¾ƒæ—©å‡ºç°çš„åŒ¹é…é—®é¢˜ï¼š</p>

<pre><code>// The scoring loop:
for (var i = 0, l = captures.length; i &lt; l; i += 3) {
  if (captures[i]) score -= 0.1;
  if (captures[i+1]) score += (l - i) / l; // the magic
  if (captures[i+2]) score -= 0.1;
}
</code></pre>

<p>Now the score given for any singular legitimate match will decrease as the index (<code>i</code>) increases. Here are the results:</p>

<p>ç°åœ¨ä»»ä½•å¥‡å¼‚çš„åˆæ³•çš„åŒ¹é…çš„å¾—åˆ†å°†ä¼šé€’å‡éšç€æŒ‡æ•°ï¼ˆiï¼‰å¢åŠ ã€‚è¿™é‡Œæ˜¯ç»“æœï¼š</p>

<pre><code>var score = createFuzzyScorer('omg');

score('omg');     // =&gt; 1.99
score('xOmg');    // =&gt; 1.90
score('om');      // =&gt; 1.66
score('.o.m.g.'); // =&gt; 1.59
score('og');      // =&gt; 1.33
score('o');       // =&gt; 1.00
score('nope');    // =&gt; 0.00
</code></pre>

<p>This is getting closer to our intuition. The next step would be to try to create a real autocompletion widget. Iâ€™ve done it so I know that weâ€™ll want to make one more change. The problem with our scoring right now is that itâ€™ll award legitimate characters relative to the length of the string. But when comparing scores across multiple subject strings, this approach seems broken.</p>

<p>è¿™æ˜¯è¶Šæ¥è¶Šæ¥è¿‘æˆ‘ä»¬çš„ç›´è§‰ã€‚ä¸‹ä¸€æ­¥å°†åŠªåŠ›åˆ›é€ ä¸€ä¸ªçœŸæ­£çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½éƒ¨ä»¶ã€‚æˆ‘å·²ç»è¿™æ ·åšäº†ï¼Œæ‰€ä»¥æˆ‘çŸ¥é“ï¼Œæˆ‘ä»¬å°†è¦åšä¸€ä¸ªæ”¹å˜ã€‚ç°åœ¨æˆ‘ä»¬åˆ†å€¼çš„é—®é¢˜æ˜¯ï¼Œå¥–åŠ±åˆæ³•çš„å­—ç¬¦ç›¸å¯¹äºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä½†æ˜¯ï¼Œå½“æ¯”è¾ƒå¤šä¸ªåŒç±»å­—ç¬¦ä¸²çš„åˆ†æ•°æ—¶ï¼Œè¿™ç§æ–¹æ³•ä¼¼ä¹è¢«æ‰“ç ´ã€‚</p>

<pre><code>createFuzzyScorer('RuneScript')('Ru'); // 1.9
createFuzzyScorer('Ruby')('Ru');       // 1.7
</code></pre>

<p>These should both score equally, as â€œRuâ€ is just as likely to become â€œRubyâ€ as it is to become â€œRuneScriptâ€. To achieve this we should only take into account the index, and make the weight of any scoring decision inversely proportional to that index, in this case via an exponential taper (<code>pow(index, -2)</code>).</p>

<p>æ˜¾ç„¶ï¼Œåˆ†æ•°åº”è¯¥ç›¸ç­‰ï¼Œå› ä¸º â€œRuâ€ æ¨æ¼”æˆ â€œRubyâ€ å’Œ â€œRuneScriptâ€ æ˜¯ä¸€æ ·. ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘åˆ°è¯¥æŒ‡æ•°ï¼Œå¹¶ä½¿ä»»ä½•å¾—åˆ†å†³å®šçš„æƒé‡ä¸æŒ‡æ•°æˆåæ¯”ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡æŒ‡æ•°é”¥åº¦ (<code>pow(index, -2)</code>)</p>

<pre><code>// The scoring loop:
for (var i = 0, l = captures.length; i &lt; l; i += 3) {
  var relevancyOfCharacter = Math.pow(i + 1, -2);
  if (captures[i]) score -= relevancyOfCharacter * 0.1;
  if (captures[i+1]) score += relevancyOfCharacter * 1;
  if (captures[i+2]) score -= relevancyOfCharacter * 0.1;
}
</code></pre>

<p><em>(Final version of <code>createFuzzyScorer</code> available <a href="https://gist.github.com/padolsey/a27a32d5859a71403b10">as a gist</a>.)</em></p>

<p><strong><a href="http://jsbin.com/wanetemare/1/edit?js,output">See this demo using programming languages as the dataset</a></strong>. Try intentionally misspelling something (jawascript), or missing out characters (jaascit), or just going a little crazy (jahskt). It works beautifully.</p>

<p><strong><a href="http://jsbin.com/wanetemare/1/edit?js,output">åœ¨æ•°æ®é›†ç”¨ç¼–ç¨‹è¯­è¨€å®ç°æŸ¥çœ‹demo</a></strong>. å°è¯•æ‹¼å†™é”™è¯¯ï¼ˆjawascriptï¼‰ï¼Œæˆ–è€…ä¸¢å¤±å­—æ¯ï¼ˆjaascitï¼‰æˆ–è€…è¾“å…¥ä¸€äº›ç±»ä¼¼çš„ï¼ˆjahsktï¼‰ï¼Œ å®ƒä¾ç„¶å·¥ä½œå¾—å¾ˆæ¼‚äº®ã€‚</p>

<p>To achieve speedy sorting, a fuzzy scorer is created for every single value before the user types anything:</p>

<p>ä¸ºäº†å®ç°å¿«é€Ÿæ’åºï¼Œ æ¯ä¸€ä¸ªå•ä¸€çš„å€¼çš„æ¨¡ç³Šåˆ†æ•°åº”è¯¥åœ¨ç”¨æˆ·è¾“å…¥ä¹‹å‰è¢«åˆ›å»ºï¼š</p>

<pre><code>var data = PROGRAMMING_LANGUAGES.map(function(lang, i) {
  return {
    actualValue: lang,
    score: createFuzzyScorer(lang),
    i: i,
    toString: function() { return lang; }
  };
});
</code></pre>

<p>This means we can iterate through <code>data</code> on every relevant input event, and call the <code>score()</code>method with the current query. We can then bundle this into a <em>filter-&gt;sort-&gt;slice</em> flow to get our list of sensible suggestions:</p>

<p>è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥éå†æ¯ä¸ªç›¸å…³çš„è¾“å…¥äº‹ä»¶çš„ data ï¼Œè°ƒç”¨ score() æ–¹æ³•æ¥å®ç°å½“å‰æŸ¥è¯¢ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™å˜æˆä¸€ä¸ª <em>filter-&gt;sort-&gt;slice</em> å¾—å‡ºæˆ‘ä»¬åˆ—å‡ºçš„æœ‰åˆ¤æ–­åŠ›çš„å»ºè®®ï¼š</p>

<pre><code>var sorted = data.filter(function(item) {

  // Get rid of any very unlikely matches (and cache the score!)
  return (item._cachedScore = item.score(query)) &gt;= .5;

}).sort(function(a, b) {

  var as = a._cachedScore;
  var bs = b._cachedScore;

  // Sort by score, and if score is equal, then by original index:
  // (We would typically return 0 in that case but some engines don't stable-sort)
  return as &gt; bs ? -1 : as == bs &amp;&amp; a.i &lt; b.i ? -1 : 1;

}).slice(0, 10); // We only need the top 10...
</code></pre>

<p>And.. weâ€™re done. Itâ€™s never really finished though: youâ€™ll find endless tweaks that can be made to the scorer to make it more believably resemble human-like intuition.</p>

<p>æˆ‘ä»¬åšåˆ°äº†ï¼Œè™½ç„¶å®ƒä»æ¥æ²¡æœ‰çœŸæ­£å®Œæˆï¼Œä½ ä¼šå‘ç°å¾ˆå¤šçš„è°ƒæ•´ï¼Œä½¿å¾—åˆ†æ•°æ›´åŠ äººå·¥æ™ºèƒ½ã€‚</p>

<p>For those wanting to test the resulting country autocompletion interaction: <strong><a href="http://jsbin.com/lejucikiha/1/edit?js,output">See the demo</a></strong>.</p>

<p>å¯¹äºé‚£äº›æƒ³è¦æµ‹è¯•å›½å®¶è‡ªåŠ¨å®Œæˆè¿”å›å€¼äº¤äº’çš„ï¼Œ<strong><a href="http://jsbin.com/lejucikiha/1/edit?js,output">See the demo</a></strong>.</p>

<p>I guess, despite my initial warning, I wouldnâ€™t actually mind using this in production, as long as there were a decent number of unit tests. Iâ€™d probably also assemble the regular expressions on the server and serve them up as literals. Itâ€™s also worth mentioning that almost everything in this post has been exploring the fuzzy-matching of very short strings in small datasets. Even in the case of the country demo, to get more applicable results, I broke up long names into the component parts and then scored against each. E.g.</p>

<p>æˆ‘æƒ³ï¼Œå°½ç®¡æˆ‘æœ€åˆçš„å¿ å‘Šï¼Œæˆ‘ä¸ä»‹æ„ä½¿ç”¨è¿™ä¸ªåœ¨ç”Ÿäº§ï¼Œåªè¦åšä¸€äº›æ•°é‡çš„å•ä½æµ‹è¯•ã€‚æˆ‘å¯èƒ½ä¹Ÿç»„è£…æ­£åˆ™è¡¨è¾¾å¼åœ¨æœåŠ¡å™¨å¹¶ä¸ºæä¾›æœåŠ¡ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå‡ ä¹æ‰€æœ‰çš„è¿™ç¯‡æ–‡ç« éƒ½åœ¨æ¢ç´¢å°æ•°æ®é›†ä¸Šçš„æ¨¡ç³ŠåŒ¹é…ã€‚å³ä½¿åœ¨å›½å®¶è¾“å…¥æ¡ˆä¾‹çš„æ¼”ç¤ºï¼Œä»¥è·å¾—æ›´é€‚ç”¨çš„ç»“æœï¼Œæˆ‘æŠ˜æ–­äº†é•¿çš„åå­—ï¼Œç»„æˆéƒ¨åˆ†ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªå¾—åˆ†ã€‚ä¾‹å¦‚</p>

<pre><code>// E.g. Macedonia, the Former Yugoslav Republic of:
var scorers = [
  "Macedonia, the Former Yugoslav Republic of",
  "Macedonia",
  "the",
  "former",
  "yugoslav",
  "republic",
  "of"
].map(createFuzzyScorer);
// Etc.
</code></pre>

<p>And this would be terribly inefficient on a larger scale, so with any dataset longer than a list of countries youâ€™re probably best to explore <a href="http://en.wikipedia.org/wiki/Trie">Trie</a>-based approaches to autocompletion.</p>

<p>And with that, Iâ€™ll shut-up and wish you merry regexâ€™ing!</p>

<p>ç„¶è€Œè¿™åœ¨å¤§è§„æ¨¡æ‰«æä¸‹æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œæ‰€ä»¥ä»»ä½•æ•°æ®é›†æ¯”çš„å›½å®¶åå•é•¿çš„ï¼Œä½ å¯èƒ½æœ€å¥½çš„æ¢ç©¶ <a href="http://en.wikipedia.org/wiki/Trie">Trie</a>-based æ–¹æ³• æ¥å¤„ç†è‡ªåŠ¨å®Œæˆã€‚ç„¶åï¼Œæˆ‘ä¼šé—­å˜´ï¼Œ wish you merry regexâ€™ing!</p>

<p>è¯‘è€…æ³¨ï¼š</p>

<p>æ–‡ä¸­åŠå…¶è¯„è®ºæåˆ°çš„èµ„æºï¼š</p>

<p><a href="https://github.com/padolsey/relevancy.js">https://github.com/padolsey/relevancy.js</a></p>

<p><a href="https://github.com/bevacqua/fuzzysearch">https://github.com/bevacqua/fuzzysearch</a></p>

<p><a href="https://github.com/gf3/Levenshtein">https://github.com/gf3/Levenshtein</a></p>

<p>ä½œè€…githubï¼š<a href="https://github.com/padolsey">https://github.com/padolsey</a></p>

<p>è¯‘è€…ï¼šä¸»è¦ç”¨åˆ°æ­£åˆ™æ‡’æƒ°åŒ¹é…å»å®ç°<code>çœŸå€¼</code>çº¿æ€§å›å½’ã€‚you are truly, how much truly you are!</p>

<p>å°±æ˜¯é€šè¿‡åŒ¹é…åº¦åˆ†æ•°è¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯å•å•çš„boolean å€¼æŒ‡å®šï¼Œå†a-z æ’åºè¾“å‡ºï¼Œ</p>

<p><a href="https://github.com/bevacqua/fuzzysearch">https://github.com/bevacqua/fuzzysearch</a>æ‰€ç”¨çš„æ–¹æ³•ï¼Œä½ åªèƒ½åœ¨true or false ä¹‹é—´é€‰æ‹©ï¼Œè€Œpadolseyæ‰€ç”¨çš„æ–¹æ³•å­—æ ·å¼•å…¥äº†æƒé‡æ¦‚å¿µæ›´åŠ æ™ºèƒ½ï¼Œä½†æ˜¯åœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹æ˜¯éå¸¸ä½æ•ˆçš„ã€‚å¦å¤–åœ¨ä½œè€…çš„åšå®¢è¯„è®ºä¸­ä¹Ÿæåˆ°çš„ <a href="https://github.com/gf3/Levenshtein">https://github.com/gf3/Levenshtein</a>ï¼Œ å¯ä»¥è‡ªè¡Œwikiä¸€ä¸‹ã€‚</p>

<hr />

<p>æœ€åå¦‚æœ‰æ¼è¯‘ï¼Œé”™è¯‘ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p>

]]></content>
  </entry>
  
</feed>
